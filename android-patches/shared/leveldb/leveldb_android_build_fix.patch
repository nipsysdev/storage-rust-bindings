--- a/vendor/nim-codex/vendor/nim-leveldbstatic/leveldbstatic/prelude.nim
+++ b/vendor/nim-codex/vendor/nim-leveldbstatic/leveldbstatic/prelude.nim
@@ -6,7 +6,9 @@
   envPosix = root/"vendor"/"util"/"env_posix.cc"
 
   LevelDbCMakeFlags {.strdefine.} =
-    when defined(macosx):
+    when defined(android):
+      "-DCMAKE_BUILD_TYPE=Release -DLEVELDB_BUILD_BENCHMARKS=OFF -DLEVELDB_PLATFORM_POSIX=1 -DHAVE_PTHREAD=1 -DCMAKE_C_FLAGS=-march=armv8-a -DNO_X86_INTRINSICS -DCMAKE_CXX_FLAGS=-march=armv8-a -DNO_X86_INTRINSICS"
+    elif defined(macosx):
       "-DCMAKE_BUILD_TYPE=Release -DLEVELDB_BUILD_BENCHMARKS=OFF"
     elif defined(windows):
       "-G\"MSYS Makefiles\" -DCMAKE_BUILD_TYPE=Release -DLEVELDB_BUILD_BENCHMARKS=OFF"
@@ -19,9 +21,13 @@
   buildDir = $(root/"build")
 
 proc buildLevelDb() =
-  if fileExists(buildDir/"Makefile"):
-    echo "LevelDB already build. Delete '" & buildDir & "' to force rebuild."
-    return
+  when defined(android):
+    # Always force rebuild on Android to ensure proper cross-compilation
+    echo "Android build detected - forcing LevelDB rebuild"
+  else:
+    if fileExists(buildDir/"Makefile"):
+      echo "LevelDB already build. Delete '" & buildDir & "' to force rebuild."
+      return
 
   echo "Initializing submodule..."
   discard gorge "git submodule deinit -f \"" & root & "\""
@@ -48,6 +54,14 @@
   {.passc: "-D_UNICODE".}
   {.passc: "-DUNICODE".}
 
-when defined(posix):
+when defined(android):
+  {.compile: envPosix.}
+  {.passc: "-DLEVELDB_PLATFORM_POSIX".}
+  {.passc: "-DHAVE_PTHREAD".}
+  {.passc: "-DOS_ANDROID".}
+  # Android-specific flags to prevent linking issues
+  {.passc: "-DNO_SNAPPY".}
+  {.passc: "-DLEVELDB_NO_SNAPPY".}
+elif defined(posix):
   {.compile: envPosix.}
   {.passc: "-DLEVELDB_PLATFORM_POSIX".}
