--- a/vendor/nim-codex/vendor/nim-bearssl/bearssl/csources.nim	2025-12-01 16:18:47.441823114 -0500
+++ b/vendor/nim-codex/vendor/nim-bearssl/bearssl/csources.nim	2025-12-01 16:19:09.414958734 -0500
@@ -57,9 +57,19 @@
 
 when sizeof(int) == 8:
   {.passc: "-DBR_64=1".}
-  when hostCPU == "amd64":
+  when hostCPU == "amd64" and not defined(android):
     {.passc:" -DBR_amd64=1".}
   when defined(vcc):
     {.passc: "-DBR_UMUL128=1".}
   else:
     {.passc: "-DBR_INT128=1".}
+
+# Disable x86 intrinsics for Android/ARM64 builds
+when defined(android) or defined(NO_X86_INTRINSICS):
+  {.passc: "-DBR_NO_X86_INTRINSICS=1".}
+  # Also disable specific x86-specific optimizations
+  {.passc: "-DBR_NO_X86=1".}
+  # Ensure we don't try to use x86 assembly on ARM
+  {.passc: "-DBR_NO_ASM=1".}
+  # Include the Android intrinsics wrapper header
+  {.passc: "-include\"bearssl_android_intrinsics.h\"".}
