# Android build environment configuration
# This file contains Android-specific build settings

# Android NDK paths
ANDROID_NDK_ROOT=/opt/android-ndk
ANDROID_SDK_ROOT=/opt/android-sdk

# Android API level
ANDROID_API_LEVEL=21

# Target architectures
ANDROID_ARM64_TARGET=aarch64-linux-android
ANDROID_X86_64_TARGET=x86_64-linux-android
ANDROID_ARM32_TARGET=armv7a-linux-androideabi
ANDROID_X86_TARGET=i686-linux-android

# Compiler settings
ANDROID_CC=${ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/linux-x86_64/bin/${ANDROID_ARM64_TARGET}${ANDROID_API_LEVEL}-clang
ANDROID_CXX=${ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/linux-x86_64/bin/${ANDROID_ARM64_TARGET}${ANDROID_API_LEVEL}-clang++
ANDROID_AR=${ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ar

# Android-specific compiler flags
ANDROID_CFLAGS="-DANDROID -fPIC -O2 -ffunction-sections -fdata-sections"
ANDROID_CPPFLAGS="-DANDROID -fPIC -O2 -ffunction-sections -fdata-sections"
ANDROID_LDFLAGS="-Wl,--gc-sections -Wl,--exclude-libs,ALL"

# Android system libraries
ANDROID_LIBS="-llog -landroid -lz -lm"

# Disable features not supported on Android
ANDROID_DEFINES="-DNO_SIGNAL_HANDLER -DDISABLE_X86_INTRINSICS -DANDROID_STUB"

# Build configuration
NIM_COMPILE_ARGS="--os:android --cpu:arm64 --cc:${ANDROID_CC} --define:android"
NIM_LINK_ARGS="--passL:${ANDROID_LDFLAGS} --passL:${ANDROID_LIBS}"

# Environment variables for build
export CC=${ANDROID_CC}
export CXX=${ANDROID_CXX}
export AR=${ANDROID_AR}
export CFLAGS=${ANDROID_CFLAGS}
export CPPFLAGS=${ANDROID_CPPFLAGS}
export LDFLAGS=${ANDROID_LDFLAGS}

# Android-specific paths
export SYSROOT=${ANDROID_NDK_ROOT}/sysroot
export PATH=${ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH}